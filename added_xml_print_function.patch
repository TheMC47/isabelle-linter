Index: src/Pure/PIDE/command.ML
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/Pure/PIDE/command.ML b/src/Pure/PIDE/command.ML
--- a/src/Pure/PIDE/command.ML	(revision 74475:8e9f38240c05ecd579421f078c60e152f15b9260)
+++ b/src/Pure/PIDE/command.ML	(revision 74475+:8e9f38240c05+)
@@ -441,6 +441,28 @@
             else ()}
       else NONE);
 
+val _ =
+  let
+    fun get_out s = case s of
+        "info" => SOME writeln
+      | "warn" => SOME warning
+      | "error" => SOME error
+      | _ => NONE
+    fun write_msgs args =
+      case args of
+        level :: msg :: args1 =>
+          let
+            val msg1 = (msg |> XML.parse |> YXML.string_of) handle _ => msg
+            val _ = case get_out level of SOME out => out msg1 | NONE => ()
+          in write_msgs args1 end
+      | _ => ()
+  in
+    print_function "print_xml"
+      (fn {args, ...} =>
+        SOME {delay = NONE, pri = Task_Queue.urgent_pri + 1, persistent = false, strict = false,
+          print_fn = fn _ => fn _ => write_msgs args})
+  end;
+
 
 (* combined execution *)
 
